name: Test Daily Domain Data

on:
    schedule:
        - cron: "0 20 * * *"
    push:
        branches:
            - master

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@master
            - name: Installing setup-tools
                run: |
                    sudo apt-get install python3-setuptools
            - name: Install requirements
                run: |
                    pip3 install -r requirements.txt
            - name: Create local changes
                run: |
                    python3 run.py
            - name: Commit files
                run: |
                    git config --local user.email "action@github.com"
                    git config --local user.name "GitHub Action"
                    git commit -m "Add changes" -a
            - name: Push changes
                uses: ad-m/github-push-action@master
                with:
                    github_token: ${{ secrets.GITHUB_TOKEN }}